services:

  q2proded:
    image: q2proded:r3817
    build:
      context: ./q2proded
      platforms:
        - linux/amd64
        - linux/arm64/v8

  q2admin-kmod:
    image: q2admin-kmod:1.17.49-kmod
    build:
      context: ./q2admin-kmod
      platforms:
        - linux/amd64
        - linux/arm64/v8

  dday-old-vibes:
    image: dday-old-vibes:4.4k
    build:
      context: ./dday-old-vibes
      platforms:
        - linux/amd64
        - linux/arm64/v8

  fullspeed:
    image: dday-old-vibes:4.4k
    restart: always
    volumes:
      - ./fullspeed/maps:/usr/local/share/q2pro/dday/maps
      - ./fullspeed/files:/home/ubuntu/.q2pro/dday
    network_mode: host
    logging:
      driver: "json-file"
      options:
        max-size: "10M"
        max-file: 100
